name = "trmnl-go-transit-proxy"
main = "src/index.js"
compatibility_date = "2026-01-23"
compatibility_flags = ["nodejs_compat"]

# Observability - Tail Workers (logs to stdout)
observability = { enabled = true }

# Configuration variables
[vars]
ORIGIN_BASE_URL = "https://api.openmetrolinx.com/OpenDataAPI/"
ORIGIN_AUTH_TOKEN = "30026517"
EDGE_TTL = "300"
BROWSER_TTL = "60"
STALE_WHILE_REVALIDATE_TTL = "30"
ORIGIN_TIMEOUT_MS = "3000"
LOG_LEVEL = "debug"
DEBUG_PERFORMANCE = "false"
VALIDATE_PARAMS = "true"
ENABLE_CORS = "true"
ENABLE_OBSERVABILITY_HEADERS = "true"
ENVIRONMENT = "production"

# Optional KV namespace (for future enhancements like rate limiting)
# [[kv_namespaces]]
# binding = "CACHE_CONFIG"
# id = "your-kv-namespace-id"
# preview_id = "your-preview-namespace-id"

# Optional D1 database (for future metrics/logging)
# [[d1_databases]]
# binding = "DB"
# database_name = "trmnl-go-transit"
# database_id = "your-database-id"
